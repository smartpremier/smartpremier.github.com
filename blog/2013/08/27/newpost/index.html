
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>멀티노드 스톰 클러스터 구동하기 - smartpremier의 큰개소리</title>
  <meta name="author" content="smartpremier">

  
  <meta name="description" content="이 예제는 CentOS 6.3 환경에서 Storm을 분산 멀티 클러스터 환경에 어떻게 설치하고 설정하는지 자세히 소개한다. Storm을 실행하기 위해 필요한 ZooKeeper와 Storm의 각 데몬 프로세스를 관리 감독할 Supervisord도 다룬다. Storm &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://smartpremier.github.io/blog/2013/08/27/newpost">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="smartpremier의 큰개소리" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">smartpremier의 큰개소리</a></h1>
  
    <h2>Return to basic.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:smartpremier.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">멀티노드 스톰 클러스터 구동하기</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-08-27T00:36:00+09:00" pubdate data-updated="true">Aug 27<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>이 예제는 CentOS 6.3 환경에서 Storm을 분산 멀티 클러스터 환경에 어떻게 설치하고 설정하는지 자세히 소개한다. Storm을 실행하기 위해 필요한 ZooKeeper와 Storm의 각 데몬 프로세스를 관리 감독할 Supervisord도 다룬다. Storm 클러스터 구축을 완료하면 정상 동작을 테스트하기 위해 예제 Topology를 실행하는 방법과 그에 따른 일반적인 운영이슈를 FAQ방식으로 정리하며 글을 마무리 할 예정이다.</p>

<h1>다루게 되는 내용들</h1>

<ul>
<li>Storm 멀티 노드 클러스터를 설치하고 설정하기</li>
<li>Storm에서 사용할 ZooKeeper클러스터 설치하기(ZooKeeper클러스터는 single-node로 구성)</li>
<li>Storm 마스터 노드 1대에서 Storm의 Nimbus와 UI 데몬 구동하기</li>
<li>Storm 슬레이브 노드 3대에서 Supervisor 구동하기</li>
<li>Supervisord를 사용하여 Storm 마스터 노드와 슬레이브 노드 관리하기</li>
<li>구축된 Storm 클러스터에 예제 Topology를 실행하기</li>
</ul>


<h1>소프트웨어 버전</h1>

<ul>
<li>CentOS release 6.3</li>
<li>Storm 0.8.2 release</li>
</ul>


<h1>Storm 클러스터 구성 개요</h1>

<ul>
<li><code>zk01</code> : Zookeeper 클러스터는 단 한개의 ZooKeeper 노드로 구성한다.(서비스환경에서는 최소 3대구성)</li>
<li><code>storm01</code> : Storm 클러스터의 마스터 노드. Nimbus와 UI 데몬 실행</li>
<li><code>storm{02, 03,...,n}</code> : Storm 클러스터의 슬레이브 노드. 실제 작성한 Storm Application을 실행하는worker 프로세스와 이를 관리하는 Supervisor 데몬 실행.</li>
</ul>


<p>Storm의 슬레이브 노드는 자신이 구동되는 시점에 ZooKeeper에 자신의 정보를 기록한다. 이렇게 기록된 슬레이브 노드들에 대한 정보는 마스터 노드가 참조하여 현재 가용한 클러스터를 구성한다. 따라서 슬레이브 노드가 1대 이든 수백대이든 전혀 문제가 되지 않는 구조를 가진다. 따라서 우리의 예제는 슬레이브 노드의 수와 무관하게 잘 동작할 것이다. 우리가 해줘야하는 것은 그저 슬레이브 노드를 설치하고 설정하면 된다.이후 동작은 Storm이 자동적으로 알아서 동작한다.</p>

<p>Storm 클러스터 구성에 앞서 간략하게 스톰의 구성요소들에 대해 소개한다.</p>

<h2>Background: Storm 아키텍처</h2>

<p>Storm은 클러스터내에서 2가지 타입의 노드로 구별된다.</p>

<ol>
<li><p><strong>마스터 노드</strong> worker 노드에 작업을 할당하고 클러스터를 모니터링하고, 클러스터에 애플리케이션을 배포하는 역할을 하는 Nimbus라 불리는 프로세스가 실행되고 있는 노드이다.하둡의 JobTracker와 유사하다.</p></li>
<li><p><strong>워커 노드</strong> Supervisor 라 불리는 데몬 프로세스가 실행되고 있는 노드이다. Supervisor는 Nimbus로 부터 작업이 할당되면 필요한 만큼 워커 프로세스를 생성하여 시작시키고 작업이 종료되면 워커 프로세스를 종료시키는 기능을 담당한다. 각 워커 프로세스는 Topology의 한 부분을 수행한다. Supervisor는 하둡의 TaskTracker와 유사하다.</p></li>
</ol>


<h2>Networking 구성</h2>

<p>모든 노드는 DNS에 등록된 호스트명을 통해 노드간 접속을 하게된다. DNS 구성은 추후 다른 섹션을 통해 소개하겠다. 일단은 편의를 위하여 <code>/etc/hosts/</code> 파일에 필요한 노드 정보를 설정한다.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>192.168.56.101   storm01.bigdata.com storm01 <span class="c"># nimbus</span>
</span><span class='line'>192.168.56.102    storm02.bigdata.com storm02 <span class="c"># supervisor</span>
</span><span class='line'>192.168.56.103    storm03.bigdata.com storm03 <span class="c"># supervisor</span>
</span><span class='line'>192.168.56.104    storm04.bigdata.com storm04 <span class="c"># supervisor</span>
</span><span class='line'>192.168.56.105    zk01.bigdata.com    zk01
</span></code></pre></td></tr></table></div></figure>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">smartpremier</span></span>

      








  


<time datetime="2013-08-27T00:36:00+09:00" pubdate data-updated="true">Aug 27<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://smartpremier.github.io/blog/2013/08/27/newpost/" data-via="" data-counturl="http://smartpremier.github.io/blog/2013/08/27/newpost/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/08/27/newpost/">멀티노드 스톰 클러스터 구동하기</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - smartpremier -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
